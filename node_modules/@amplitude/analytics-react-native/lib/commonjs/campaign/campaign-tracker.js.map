{"version":3,"names":["_analyticsCore","require","CampaignTracker","constructor","apiKey","options","storage","storageKey","getStorageKey","MKTG","parser","CampaignParser","track","onNewCampaign","disabled","Boolean","trackNewCampaigns","trackPageViews","excludeReferrers","location","unshift","hostname","initialEmptyValue","EMPTY_VALUE","isNewCampaign","current","previous","ignoreSubdomainInReferrer","referrer","referring_domain","currentCampaign","_previous_referrer","prevReferringDomain","previousCampaign","includes","hasNewCampaign","JSON","stringify","hasNewDomain","domainWithoutSubdomain","saveCampaignToStorage","campaign","set","getCampaignFromStorage","get","createCampaignEvent","campaignParameters","BASE_CAMPAIGN","identifyEvent","Object","entries","reduce","identify","key","value","setOnce","unset","Identify","pageViewEvent","event_type","event_properties","page_title","document","title","page_location","href","page_path","pathname","createIdentifyEvent","send","isNewSession","parse","exports","domain","parts","split","length","slice","join"],"sourceRoot":"../../../src","sources":["campaign/campaign-tracker.ts"],"mappings":"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","ignoreList":[]}