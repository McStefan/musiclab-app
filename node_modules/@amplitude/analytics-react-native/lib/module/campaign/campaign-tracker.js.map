{"version":3,"names":["createIdentifyEvent","Identify","getCookieName","getStorageKey","BASE_CAMPAIGN","EMPTY_VALUE","MKTG","CampaignParser","CampaignTracker","constructor","apiKey","options","storage","storageKey","parser","track","onNewCampaign","disabled","Boolean","trackNewCampaigns","trackPageViews","excludeReferrers","location","unshift","hostname","initialEmptyValue","isNewCampaign","current","previous","ignoreSubdomainInReferrer","referrer","referring_domain","currentCampaign","_previous_referrer","prevReferringDomain","previousCampaign","includes","hasNewCampaign","JSON","stringify","hasNewDomain","domainWithoutSubdomain","saveCampaignToStorage","campaign","set","getCampaignFromStorage","get","createCampaignEvent","campaignParameters","identifyEvent","Object","entries","reduce","identify","key","value","setOnce","unset","pageViewEvent","event_type","event_properties","page_title","document","title","page_location","href","page_path","pathname","send","isNewSession","parse","domain","parts","split","length","slice","join"],"sourceRoot":"../../../src","sources":["campaign/campaign-tracker.ts"],"mappings":"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","ignoreList":[]}